Следующий символ читать через метод с возможностью отката (unget)

возможно стоит иметь поле с последним значимым состоянием

в случае ошибки необходимо выводить номер строки:номер символа, подсвечивать начало ошибки
то есть необходимо суммировать длину каждой лексемы и в случае успешного анализа прибавлять эту сумму к длине строки
